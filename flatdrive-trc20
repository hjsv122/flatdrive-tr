FlatDrive-TRC20/
â”œâ”€ public/
â”‚   â”œâ”€ index.html
â”‚   â”‚   <!DOCTYPE html>
â”‚   â”‚   <html lang="ar">
â”‚   â”‚   <head>
â”‚   â”‚     <meta charset="UTF-8">
â”‚   â”‚     <meta name="viewport" content="width=device-width, initial-scale=1.0">
â”‚   â”‚     <title>ğŸš— FlatDrive â€” Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© TRC20</title>
â”‚   â”‚     <link rel="stylesheet" href="style.css">
â”‚   â”‚   </head>
â”‚   â”‚   <body>
â”‚   â”‚     <div class="game-container">
â”‚   â”‚       <h1>ğŸš— FlatDrive â€” Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© TRC20</h1>
â”‚   â”‚       <div class="info">
â”‚   â”‚         <div>TRX Ø§Ù„Ù…ÙƒØªØ³Ø¨: <strong id="trxEarned">0</strong></div>
â”‚   â”‚         <div>Ø§Ù„Ù…Ø³Ø§ÙØ© Ø§Ù„Ù…Ù‚Ø·ÙˆØ¹Ø©: <span id="distance">0</span> Ù…ØªØ±</div>
â”‚   â”‚         <div>Ø±ØµÙŠØ¯ Ø¯Ø§Ø®Ù„ÙŠ (USDT): <span id="wallet">0.00</span></div>
â”‚   â”‚         <div>ØªÙ…ÙˆÙŠÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø© (USDT): <span id="gameFund">0.00</span></div>
â”‚   â”‚         <div>Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø®Ø§Ø¯Ù… (TRX): <span id="serverWallet">0.00</span></div>
â”‚   â”‚         <div>Ø§Ù„Ø­Ø§Ù„Ø©: <span id="status">Ù…ØªÙˆÙ‚ÙØ©</span></div>
â”‚   â”‚       </div>
â”‚   â”‚       <canvas id="gameCanvas"></canvas>
â”‚   â”‚       <div class="controls">
â”‚   â”‚         <select id="carColor">
â”‚   â”‚           <option value="#ff6b6b">Ø£Ø­Ù…Ø±</option>
â”‚   â”‚           <option value="#4ade80">Ø£Ø®Ø¶Ø±</option>
â”‚   â”‚           <option value="#3b82f6">Ø£Ø²Ø±Ù‚</option>
â”‚   â”‚           <option value="#facc15">Ø£ØµÙØ±</option>
â”‚   â”‚         </select>
â”‚   â”‚         <button id="startBtn">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©</button>
â”‚   â”‚         <button id="stopBtn">ØªÙˆÙ‚Ù</button>
â”‚   â”‚         <button id="collectBtn">Ø§Ø¬Ù…Ø¹ (ØªØ­ÙˆÙŠÙ„)</button>
â”‚   â”‚         <button id="convertFund">ØªØ­ÙˆÙŠÙ„ ØªÙ…ÙˆÙŠÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
â”‚   â”‚       </div>
â”‚   â”‚       <div class="fund-panel">
â”‚   â”‚         <h2>ØªÙ…ÙˆÙŠÙ„ Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø®Ø§Ø¯Ù…</h2>
â”‚   â”‚         <input id="fundAmount" type="number" min="0" placeholder="ÙƒÙ… TRX ØªØ±ÙŠØ¯ Ø¥Ø±Ø³Ø§Ù„ØŸ">
â”‚   â”‚         <button id="fundServerBtn">Ø¥ÙŠØ¯Ø§Ø¹</button>
â”‚   â”‚       </div>
â”‚   â”‚       <div class="withdraw-panel">
â”‚   â”‚         <h2>Ø·Ù„Ø¨ Ø³Ø­Ø¨</h2>
â”‚   â”‚         <input id="toAddress" placeholder="Ø¹Ù†ÙˆØ§Ù† TRX ÙŠØ¨Ø¯Ø£ Ø¨Ù€ T..." />
â”‚   â”‚         <input id="amount" type="number" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº USDT" />
â”‚   â”‚         <button id="reqWithdraw">Ø§Ø·Ù„Ø¨ Ø³Ø­Ø¨</button>
â”‚   â”‚       </div>
â”‚   â”‚     </div>
â”‚   â”‚     <script src="game.js"></script>
â”‚   â”‚   </body>
â”‚   â”‚   </html>
â”‚   â”‚
â”‚   â”œâ”€ style.css
â”‚   â”‚   body {
â”‚   â”‚     font-family: Arial, sans-serif;
â”‚   â”‚     background: #0f172a;
â”‚   â”‚     color: #e6eef8;
â”‚   â”‚     padding: 20px;
â”‚   â”‚     display: flex;
â”‚   â”‚     justify-content: center;
â”‚   â”‚   }
â”‚   â”‚   .game-container { width: 760px; background: #0b1220; padding: 18px; border-radius: 10px; box-shadow: 0 6px 24px rgba(2,6,23,0.6); }
â”‚   â”‚   h1 { font-size: 20px; margin-bottom: 10px; }
â”‚   â”‚   .info { display: flex; flex-wrap: wrap; justify-content: space-between; background: #071026; padding: 10px; border-radius: 8px; margin-bottom: 10px; }
â”‚   â”‚   canvas { width: 100%; height: 140px; background: #02111b; border-radius: 8px; display: block; margin: 12px 0; }
â”‚   â”‚   .controls, .fund-panel, .withdraw-panel { margin-bottom: 16px; }
â”‚   â”‚   button { background: #0ea5a6; color: #041014; border: none; padding: 8px 12px; border-radius: 8px; cursor: pointer; margin: 4px 0; }
â”‚   â”‚   input, select { width: 100%; padding: 8px; border-radius: 6px; border: 1px solid rgba(255,255,255,0.06); background: #02121a; color: white; margin-top: 6px; }
â”‚   â”‚
â”‚   â””â”€ game.js
â”‚       document.addEventListener("DOMContentLoaded", () => {
â”‚         const canvas = document.getElementById('gameCanvas');
â”‚         const ctx = canvas.getContext('2d');
â”‚         canvas.width = 720; canvas.height = 140;
â”‚         let running = false, trxEarned = 0, wallet = 0, gameFund = 0, distance = 0, serverWallet = 0;
â”‚         let carX = 10, carColor = '#ff6b6b';
â”‚         const updateUI = () => {
â”‚           document.getElementById('trxEarned').textContent = Math.floor(trxEarned);
â”‚           document.getElementById('wallet').textContent = wallet.toFixed(2);
â”‚           document.getElementById('gameFund').textContent = gameFund.toFixed(2);
â”‚           document.getElementById('distance').textContent = distance;
â”‚           document.getElementById('serverWallet').textContent = serverWallet.toFixed(2);
â”‚         };
â”‚         const draw = () => {
â”‚           ctx.clearRect(0,0,canvas.width,canvas.height);
â”‚           ctx.fillStyle = '#08323a';
â”‚           ctx.fillRect(0,canvas.height-20,canvas.width,20);
â”‚           ctx.fillStyle = carColor;
â”‚           ctx.fillRect(carX,canvas.height-44,60,28);
â”‚           ctx.fillStyle = '#061119';
â”‚           ctx.beginPath();
â”‚           ctx.arc(carX+12,canvas.height-12,8,0,Math.PI*2);
â”‚           ctx.fill();
â”‚           ctx.beginPath();
â”‚           ctx.arc(carX+48,canvas.height-12,8,0,Math.PI*2);
â”‚           ctx.fill();
â”‚         };
â”‚         const gameTick = () => {
â”‚           if(!running) return;
â”‚           carX += 10; if(carX>canvas.width) carX=-80;
â”‚           distance+=10;
â”‚           if(Math.random()<0.7) trxEarned+=1;
â”‚           updateUI(); draw();
â”‚           requestAnimationFrame(gameTick);
â”‚         };
â”‚         document.getElementById('carColor').onchange = e=>{carColor=e.target.value;}
â”‚         document.getElementById('startBtn').onclick=()=>{running=true; document.getElementById('status').textContent='ØªØ¹Ù…Ù„'; gameTick();}
â”‚         document.getElementById('stopBtn').onclick=()=>{running=false; document.getElementById('status').textContent='Ù…ØªÙˆÙ‚ÙØ©';}
â”‚         document.getElementById('collectBtn').onclick=async()=>{
â”‚           if(trxEarned<1){alert("Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø±Ø¨Ø§Ø­ Ù„Ø¬Ù…Ø¹Ù‡Ø§."); return;}
â”‚           const res=await fetch('/api/collect',{method:'POST'});
â”‚           const data=await res.json();
â”‚           trxEarned=data.trxEarned; wallet=data.wallet; gameFund=data.gameFund; serverWallet=data.serverWallet;
â”‚           alert(`ØªÙ… ØªØ­ÙˆÙŠÙ„ ${data.netUSDT.toFixed(2)} USDT Ø¥Ù„Ù‰ Ù…Ø­ÙØ¸ØªÙƒ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© (Ø®ØµÙ… 3% ØªÙ…ÙˆÙŠÙ„).`);
â”‚           updateUI();
â”‚         };
â”‚         document.getElementById('convertFund').onclick=async()=>{
â”‚           await fetch('/api/convertFund',{method:'POST'});
â”‚           const res=await fetch('/api/collect',{method:'POST'});
â”‚           const data=await res.json();
â”‚           wallet=data.wallet; gameFund=data.gameFund;
â”‚           updateUI();
â”‚           alert("âœ… ØªÙ… ØªØ­ÙˆÙŠÙ„ ØªÙ…ÙˆÙŠÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¥Ù„Ù‰ Ù…Ø­ÙØ¸ØªÙƒ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©.");
â”‚         };
â”‚         document.getElementById('fundServerBtn').onclick=async()=>{
â”‚           const amt=parseFloat(document.getElementById('fundAmount').value);
â”‚           const res=await fetch('/api/fund',{method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({amt})});
â”‚           const data=await res.json();
â”‚           if(data.error){alert(data.error); return;}
â”‚           trxEarned=data.trxEarned; serverWallet=data.serverWallet; updateUI();
â”‚           alert(`âœ… ØªÙ… ØªØ­ÙˆÙŠÙ„ ${amt} TRX Ø¥Ù„Ù‰ Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø®Ø§Ø¯Ù….`);
â”‚         };
â”‚         document.getElementById('reqWithdraw').onclick=async()=>{
â”‚           const to=document.getElementById('toAddress').value;
â”‚           const amt=parseFloat(document.getElementById('amount').value);
â”‚           const res=await fetch('/api/withdraw',{method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({to, amt})});
â”‚           const data=await res.json();
â”‚           if(data.error){alert(data.error); return;}
â”‚           wallet=data.wallet; serverWallet=data.serverWallet;
â”‚           updateUI();
â”‚           alert(`âœ… ØªÙ… ØªÙ‚Ø¯ÙŠÙ… Ø·Ù„Ø¨ Ø³Ø­Ø¨ ${amt} USDT Ø¥Ù„Ù‰ ${to} ÙˆØªÙ… Ø®ØµÙ… ${data.fee} TRX Ù…Ù† Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø®Ø§Ø¯Ù….\nTXID: ${data.txId}`);
â”‚         };
â”‚         updateUI(); draw();
â”‚       });
â”‚
â”œâ”€ server/
â”‚   â””â”€ server.js
â”‚       const express=require('express');
â”‚       const bodyParser=require('body-parser');
â”‚       const cors=require('cors');
â”‚       const TronWeb=require('tronweb');
â”‚       require('dotenv').config();
â”‚       const app=express();
â”‚       app.use(cors()); app.use(bodyParser.json()); app.use(express.static('public'));
â”‚       const PRIVATE_MNEMONIC=process.env.MNEMONIC;
â”‚       const FULL_NODE='https://api.trongrid.io', SOLIDITY_NODE='https://api.trongrid.io', EVENT_SERVER='https://api.trongrid.io';
â”‚       const tronWeb=new TronWeb(FULL_NODE,SOLIDITY_NODE,EVENT_SERVER,PRIVATE_MNEMONIC);
â”‚       let gameState={trxEarned:0,wallet:0,gameFund:0,serverWallet:0};
â”‚       app.post('/api/collect',(
